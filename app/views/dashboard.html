<div class="container" id="dashboard-page" ng-controller="FeedbackCtrl">
  <div ng-if="currentUser" ng-controller="TournamentsCtrl">
    <a class="btn btn-primary" ng-click="edit(currentUser)" style="float:right">Edit</a>
    <h2 translate>MEMBER_DASHBOARD</h2>
      <div class="row">
        <h1><i class="fa fa-trophy"></i>UPCOMING TOURNAMENTS</h1>
        <div ng-repeat="(id, tournament) in tournaments | orderByPriority | orderBy:'start_date':true | limitTo:2" class="col-md-4 well row-cards">
          <h3><a ng-href="#tournaments/{{ tournament.year }}/{{ tournament.slug }}">{{ l10n(tournament.name) }}</a></h3>
          <h4>{{tournament.start_date | date}}</h4>
          <span>{{tournament.no_days}} Day Tournament</span>
          <div>
            <p class="instruction-text">Click on division to sign up:</p>
            <a ng-if="held" ng-click="signUp(tournament, division, currentUser)" ng-repeat="(division, held) in tournament.divisions" class="btn btn-default"> {{ division }}</a>
          </div>
        </div>

      </div>

    <div class="row internal-announcements" ng-controller="NewsCtrl">
      <h1><i class="fa fa-bullhorn"></i>INTERNAL ANNOUNCEMENTS</h1>
      <div ng-repeat="(id, article) in articles | orderByPriority | orderBy: 'publish_date':true | filter:{internal:true} | limitTo:3" class="well">
      <h5>{{ article.publish_date | date:'dd MMM yyyy'}}</h5>
        <a ng-href="#/news/{{article.slug}}">{{ l10n(article.title) }}</a>
      </div>
    </div>

    <div class="row">
      <div class="feedback-form col-md-12">
        <form class="form-horizontal" role="form" ng-submit="post()" ng-class="{ open: isOpen }">
          <h1><i class="fa fa-comments"></i>Anonymous Member Feedback</h1>
          <textarea ng-model="feedback.text" ng-class="{ open: isOpen }" class="feedback" placeholder="Please provide your comments or suggestions. They are anonymous and we will treat them with care."></textarea>
          <input type="submit" value="Send" class="pull-right btn btn-primary" ng-class="{ open: isOpen }"/>
        </form>
      </div>
    </div>

   <div ng-show="currentUser.results" class="row ranking-dashboard" ng-controller="ChartCtrl">
      <div ng-show="playerMerit">
      <h1><i class="fa fa-arrows-v"></i>RANKING</h1>
        <table class="table table-striped">
              <th>Year</th>
              <th>Division</th>
              <th>Rank</th>
              <th>Points</th>
           <tr ng-repeat="rankObj in playerMerit | reverse" class="well">
              <th>{{ rankObj.year }}</th>
              <td>{{ rankObj.division }}</td>
              <td>{{ rankObj.rank }}</td>
              <td>{{ rankObj.points }}</td>
           </tr>
        </table>
      </div>
      <h1><i class="fa fa-arrows-v"></i>PERFORMANCE</h1>
          <div ng-repeat="year in years | reverse" class="well">
            <div class="data-source">
            <input bs-switch
              ng-model="scoreData[year]"
              type="checkbox"
              switch-active="true"
              switch-size="medium"
              switch-animate="true"
              switch-on-text="Score"
              switch-off-text="Points"
              switch-on-color="primary"
              switch-off-color="danger">
            </div>
            <h3> Performance - {{ year }}</h3>
            <canvas id="line" class="chart chart-bar" data="scoreData[year] ? lineChartData[year].datasets[0] : lineChartData[year].datasets[1]" labels="lineChartData[year].labels" height="100px"></canvas>
        </div>
    </div>


  </div>
  <div ng-if="!currentUser">
    <h2>Dashboard Access Restricted.</h2>
  </div>

</div>
